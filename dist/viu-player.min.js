/*! @name viu-player @version 0.4.2 @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("core-js/modules/es.array.find-index"),require("core-js/modules/es.array.map"),require("core-js/modules/es.array.slice"),require("core-js/modules/es.array.splice"),require("core-js/modules/es.number.constructor"),require("core-js/modules/es.object.assign"),require("core-js/modules/es.object.keys"),require("core-js/modules/es.parse-int"),require("video.js"),require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.for-each"),require("core-js/modules/web.dom-collections.for-each"),require("core-js/modules/es.array.filter"),require("core-js/modules/es.array.from"),require("core-js/modules/es.array.includes"),require("core-js/modules/es.string.includes"),require("core-js/modules/es.string.iterator")):"function"==typeof define&&define.amd?define(["core-js/modules/es.array.find-index","core-js/modules/es.array.map","core-js/modules/es.array.slice","core-js/modules/es.array.splice","core-js/modules/es.number.constructor","core-js/modules/es.object.assign","core-js/modules/es.object.keys","core-js/modules/es.parse-int","video.js","core-js/modules/es.array.concat","core-js/modules/es.array.for-each","core-js/modules/web.dom-collections.for-each","core-js/modules/es.array.filter","core-js/modules/es.array.from","core-js/modules/es.array.includes","core-js/modules/es.string.includes","core-js/modules/es.string.iterator"],t):(e=e||self).viuPlayer=t(null,null,null,null,null,null,null,null,e.videojs)}(this,function(e,t,i,n,a,s,l,o,r){"use strict";function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=h(e);if(t){var a=h(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return f(this,i)}}function y(e,t,i){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}var m=(r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r).getComponent("Button"),g=function(e){p(i,m);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).controlText("Info"),a.on("mouseenter",function(){var e=a.player_.ViuPlayer(),t=e.state.actionArea.findIndex(function(e){return e.name_&&"ViuInfo"===e.name_});e.setState({isActionSelected:t}),e.setComponentSelected(t)}),a}return d(i,[{key:"buildCSSClass",value:function(){return"vjs-info-button vjs-control ".concat(y(h(i.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this.player_.getChild("viuInfoPanel").handleClick();var e=this.player_.getChild("viuSubtitlePanel");e.hasClass("active")&&e.removeClass("active"),this.hasClass("vjs-info-active")?(this.removeClass("vjs-info-active"),this.player_.ViuPlayer().setAllPanelClose()):(this.addClass("vjs-info-active"),this.player_.ViuPlayer().setUniquePanelOpen("isInfoAreaSelected"))}}]),i}();r.registerComponent("viuInfo",g);var S=r.getComponent("Button"),b=function(e){p(i,S);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).controlText("Next Chip"),a.on("mouseenter",function(){var e=a.player_.ViuPlayer(),t=e.state.actionArea.findIndex(function(e){return e&&"ViuNextChip"===e.name_});e.setState({isActionSelected:t}),e.setComponentSelected(t)}),a}return d(i,[{key:"buildCSSClass",value:function(){return"vjs-next-chip-button vjs-next-chip ".concat(y(h(i.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this.player_.trigger("nextChip")}}]),i}();r.registerComponent("viuNextChip",b);var k=r.getComponent("Button"),A=function(e){p(i,k);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).controlText("Subtitle On"),a.on("mouseenter",function(){var e=a.player_.ViuPlayer(),t=e.state.actionArea.findIndex(function(e){return e&&"ViuSubtitle"===e.name_});e.setState({isActionSelected:t}),e.setComponentSelected(t)}),a}return d(i,[{key:"buildCSSClass",value:function(){return"vjs-viu-subtitle-toggle vjs-viu-subtitle-active ".concat(y(h(i.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this.player_.ViuPlayer().setAllPanelClose();var e=this.player_.getChild("viuInfoPanel");e.hasClass("active")&&e.removeClass("active"),this.hasClass("panel-active")?this.close():this.open()}},{key:"open",value:function(){this.controlText("Subtitle On"),this.addClass("panel-active"),this.player_.getChild("viuSubtitlePanel").handleClick(),this.player_.ViuPlayer().setUniquePanelOpen("isSubtileAreaSelected")}},{key:"close",value:function(){this.controlText("Subtitle Off"),this.removeClass("panel-active"),this.player_.getChild("viuSubtitlePanel").handleClick(),this.player_.ViuPlayer().setAllPanelClose()}}]),i}();r.registerComponent("viuSubtitle",A);var _=r.getComponent("Button"),j=function(e){p(i,_);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).on("toggleShow",function(e,t){t.open?a.open():a.close()}),a.on("mouseenter",function(){var e=a.player_.ViuPlayer();if(!e.state.isTopSubtitleDisable){var t=e.state.actionArea.length-1;e.setState({isActionSelected:t}),e.setComponentSelected(t)}}),a.on("toggleDisable",function(e,t){a.handleDisable(t.disable)}),a.controlText("Subtitle On"),a}return d(i,[{key:"buildCSSClass",value:function(){return"vjs-viu-top-subtitle-toggle vjs-viu-top-subtitle-active ".concat(y(h(i.prototype),"buildCSSClass",this).call(this))}},{key:"handleDisable",value:function(e){e?this.addClass("disable"):this.removeClass("disable")}},{key:"handleClick",value:function(){this.hasClass("disable")||(this.hasClass("vjs-viu-top-subtitle-active")?this.close():this.open())}},{key:"open",value:function(){this.addClass("vjs-viu-top-subtitle-active"),this.controlText("Top Subtitle On"),this.player_.trigger("toggleTopSubtitle",!0)}},{key:"close",value:function(){this.removeClass("vjs-viu-top-subtitle-active"),this.controlText("Top Subtitle Off"),this.player_.trigger("toggleTopSubtitle",!1)}}]),i}();r.registerComponent("viuTopSubtitle",j);var P=r.getComponent("component"),T=r.dom,w={chipName:""},D=function(e){p(i,P);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions(w,n),a}return d(i,[{key:"createEl",value:function(){var e=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-info-chipName-span",dir:"ltr"}),t=T.createEl("span",{textContent:this.options_.chipCaptions||"",className:"vjs-viu-player-info-chip-name ".concat(y(h(i.prototype),"buildCSSClass",this).call(this)),dir:"ltr"});return e.appendChild(t),e}}]),i}(),$=r.getComponent("component"),N=r.dom,x=function(e){p(i,$);var t=C(i);function i(e,n){return c(this,i),t.call(this,e,n)}return d(i,[{key:"createEl",value:function(){var e=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-info-chipCaptions-span",dir:"ltr"}),t=N.createEl("span",{textContent:this.localize("episode_num"),className:"vjs-viu-player-info-chipCaptions ".concat(y(h(i.prototype),"buildCSSClass",this).call(this)),dir:"ltr"});return 0===this.options_.isMovie&&e.appendChild(t),e}}]),i}(),L=r.getComponent("component"),E=r.dom,O=function(e){p(i,L);var t=C(i);function i(e,n){return c(this,i),t.call(this,e,n)}return d(i,[{key:"createEl",value:function(){var e=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-info-chip-desc-span",dir:"ltr"}),t=E.createEl("span",{textContent:this.options_.chipDesc||"",className:"vjs-viu-player-info-chip-desc ".concat(y(h(i.prototype),"buildCSSClass",this).call(this)),dir:"ltr"});return e.appendChild(t),e}}]),i}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var V,z=(function(e,t){e.exports=function(){var e="millisecond",t="second",i="minute",n="hour",a="day",s="week",l="month",o="quarter",r="year",c="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(e,t,i){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(i)+e},v={s:h,z:function(e){var t=-e.utcOffset(),i=Math.abs(t),n=Math.floor(i/60),a=i%60;return(t<=0?"+":"-")+h(n,2,"0")+":"+h(a,2,"0")},m:function e(t,i){if(t.date()<i.date())return-e(i,t);var n=12*(i.year()-t.year())+(i.month()-t.month()),a=t.clone().add(n,l),s=i-a<0,o=t.clone().add(n+(s?-1:1),l);return+(-(n+(i-a)/(s?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return{M:l,y:r,w:s,d:a,D:c,h:n,m:i,s:t,ms:e,Q:o}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},f="en",C={};C[f]=p;var y=function(e){return e instanceof b},m=function(e,t,i){var n;if(!e)return f;if("string"==typeof e)C[e]&&(n=e),t&&(C[e]=t,n=e);else{var a=e.name;C[a]=e,n=a}return!i&&n&&(f=n),n||!i&&f},g=function(e,t){if(y(e))return e.clone();var i="object"==typeof t?t:{};return i.date=e,i.args=arguments,new b(i)},S=v;S.l=m,S.i=y,S.w=function(e,t){return g(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var b=function(){function p(e){this.$L=m(e.locale,null,!0),this.parse(e)}var h=p.prototype;return h.parse=function(e){this.$d=function(e){var t=e.date,i=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(u);if(n){var a=n[2]-1||0,s=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},h.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},h.$utils=function(){return S},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(e,t){var i=g(e);return this.startOf(t)<=i&&i<=this.endOf(t)},h.isAfter=function(e,t){return g(e)<this.startOf(t)},h.isBefore=function(e,t){return this.endOf(t)<g(e)},h.$g=function(e,t,i){return S.u(e)?this[t]:this.set(i,e)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(e,o){var u=this,d=!!S.u(o)||o,p=S.p(e),h=function(e,t){var i=S.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return d?i:i.endOf(a)},v=function(e,t){return S.w(u.toDate()[e].apply(u.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},f=this.$W,C=this.$M,y=this.$D,m="set"+(this.$u?"UTC":"");switch(p){case r:return d?h(1,0):h(31,11);case l:return d?h(1,C):h(0,C+1);case s:var g=this.$locale().weekStart||0,b=(f<g?f+7:f)-g;return h(d?y-b:y+(6-b),C);case a:case c:return v(m+"Hours",0);case n:return v(m+"Minutes",1);case i:return v(m+"Seconds",2);case t:return v(m+"Milliseconds",3);default:return this.clone()}},h.endOf=function(e){return this.startOf(e,!1)},h.$set=function(s,o){var u,d=S.p(s),p="set"+(this.$u?"UTC":""),h=(u={},u[a]=p+"Date",u[c]=p+"Date",u[l]=p+"Month",u[r]=p+"FullYear",u[n]=p+"Hours",u[i]=p+"Minutes",u[t]=p+"Seconds",u[e]=p+"Milliseconds",u)[d],v=d===a?this.$D+(o-this.$W):o;if(d===l||d===r){var f=this.clone().set(c,1);f.$d[h](v),f.init(),this.$d=f.set(c,Math.min(this.$D,f.daysInMonth())).$d}else h&&this.$d[h](v);return this.init(),this},h.set=function(e,t){return this.clone().$set(e,t)},h.get=function(e){return this[S.p(e)]()},h.add=function(e,o){var c,u=this;e=Number(e);var d=S.p(o),p=function(t){var i=g(u);return S.w(i.date(i.date()+Math.round(t*e)),u)};if(d===l)return this.set(l,this.$M+e);if(d===r)return this.set(r,this.$y+e);if(d===a)return p(1);if(d===s)return p(7);var h=(c={},c[i]=6e4,c[n]=36e5,c[t]=1e3,c)[d]||1,v=this.$d.getTime()+e*h;return S.w(v,this)},h.subtract=function(e,t){return this.add(-1*e,t)},h.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var i=e||"YYYY-MM-DDTHH:mm:ssZ",n=S.z(this),a=this.$locale(),s=this.$H,l=this.$m,o=this.$M,r=a.weekdays,c=a.months,u=function(e,n,a,s){return e&&(e[n]||e(t,i))||a[n].substr(0,s)},p=function(e){return S.s(s%12||12,e,"0")},h=a.meridiem||function(e,t,i){var n=e<12?"AM":"PM";return i?n.toLowerCase():n},v={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:S.s(o+1,2,"0"),MMM:u(a.monthsShort,o,c,3),MMMM:u(c,o),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:u(a.weekdaysMin,this.$W,r,2),ddd:u(a.weekdaysShort,this.$W,r,3),dddd:r[this.$W],H:String(s),HH:S.s(s,2,"0"),h:p(1),hh:p(2),a:h(s,l,!0),A:h(s,l,!1),m:String(l),mm:S.s(l,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:n};return i.replace(d,function(e,t){return t||v[e]||n.replace(":","")})},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(e,c,u){var d,p=S.p(c),h=g(e),v=6e4*(h.utcOffset()-this.utcOffset()),f=this-h,C=S.m(this,h);return C=(d={},d[r]=C/12,d[l]=C,d[o]=C/3,d[s]=(f-v)/6048e5,d[a]=(f-v)/864e5,d[n]=f/36e5,d[i]=f/6e4,d[t]=f/1e3,d)[p]||f,u?C:S.a(C)},h.daysInMonth=function(){return this.endOf(l).$D},h.$locale=function(){return C[this.$L]},h.locale=function(e,t){if(!e)return this.$L;var i=this.clone(),n=m(e,t,!0);return n&&(i.$L=n),i},h.clone=function(){return S.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},p}(),k=b.prototype;return g.prototype=k,[["$ms",e],["$s",t],["$m",i],["$H",n],["$W",a],["$M",l],["$y",r],["$D",c]].forEach(function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),g.extend=function(e,t){return e.$i||(e(t,b,g),e.$i=!0),g},g.locale=m,g.isDayjs=y,g.unix=function(e){return g(1e3*e)},g.en=C[f],g.Ls=C,g.p={},g}()}(V={exports:{}},V.exports),V.exports),I=r.getComponent("component"),M=r.dom,F={chipName:""},H=function(e){p(i,I);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions(F,n),a}return d(i,[{key:"createEl",value:function(){var e=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-info-offline-time-span",dir:"ltr"}),t=this.options_.offlineTime?z(Number(1e3*this.options_.offlineTime)).format(this.options_.offlineTimeFormat):"",n=M.createEl("span",{textContent:"".concat(this.localize("off_shelf_date"),":").concat(t),className:"vjs-viu-player-info-offline-time ".concat(y(h(i.prototype),"buildCSSClass",this).call(this)),dir:"ltr"});return this.options_.offlineTime&&e.appendChild(n),e}}]),i}(),U=r.getComponent("component"),q=function(e){p(i,U);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).addChild("chipCaptions",n.info),a.addChild("chipName",n.info),a.addChild("chipOfflineTime",n.info),a.addChild("chipDesc",n.info),a}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-drawer-container vjs-viu-player-info-drawer-container",dir:"ltr"})}}]),i}(),R=function(e){p(i,U);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).addChild("ViuInfoPanelContainer",n),a}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-drawer vjs-viu-player-info-drawer",dir:"ltr"})}},{key:"upperStep",value:function(){this.containerUpperStep()}},{key:"downStep",value:function(){this.containerDownStep()}},{key:"containerDownStep",value:function(){var e=this.eventBusEl_.childNodes[0];e.clientHeight<=e.scrollHeight&&(e.scrollTop=e.scrollTop+300)}},{key:"containerUpperStep",value:function(){var e=this.eventBusEl_.childNodes[0];e.clientHeight<=e.scrollHeight&&(e.scrollTop=e.scrollTop-300)}},{key:"handleClick",value:function(){this.player_.removeClass("vjs-language-drawer-open"),this.hasClass("active")?(this.removeClass("active"),this.player_.removeClass("vjs-info-drawer-open")):(this.addClass("active"),this.player_.addClass("vjs-info-drawer-open"))}}]),i}();r.registerComponent("chipName",D),r.registerComponent("chipCaptions",x),r.registerComponent("chipDesc",O),r.registerComponent("chipOfflineTime",H),r.registerComponent("viuInfoPanel",R),r.registerComponent("viuInfoPanelContainer",q);var B=r.getComponent("component"),Y=r.dom,W={title:""},J=function(e){p(i,B);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions(W,n),a}return d(i,[{key:"createEl",value:function(){var e=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-lang-title-span",dir:"ltr"}),t=Y.createEl("span",{textContent:this.localize("setting_language")||"",className:"vjs-viu-player-lang-title ".concat(y(h(i.prototype),"buildCSSClass",this).call(this)),dir:"ltr"});return e.appendChild(t),e}}]),i}(),K=r.getComponent("Component"),Z=r.dom,G={title:""},Q=function(e){p(i,K);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions(G,n),a.on("click",function(e){e.stopPropagation();var t=e.target.dataset.languagesId;a.handleClick(t)}),a.on("mouseover",function(e){for(var t,i=e.currentTarget.childNodes,n=e.target,s=0;s<i.length;s++)n===i[s]&&(t=s);a.setState({isSelected:t}),a.setComponentSelected(t)}),a.state={isSelected:0},a.setDefaultSelected(),a}return d(i,[{key:"createEl",value:function(){var e=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-lang-items",dir:"ltr"}),t=this.options_.languages;t.length>=8?e.classList.add("over-size"):e.classList.remove("over-size");for(var n=!1,a=0;a<t.length;a++){var s=1===parseInt(t[a].isDefault,10),l=Z.createEl("li",{textContent:t[a].name||"",className:"vjs-viu-player-lang-title vjs-viu-player-lang-li ".concat(s?"lang-active":""," ").concat(y(h(i.prototype),"buildCSSClass",this).call(this)),dir:"ltr"});t[a].isDefault&&(n=!0),l.dataset.languagesId=t[a].id,e.appendChild(l)}var o=Z.createEl("li",{textContent:this.localize("hide_sub"),className:"vjs-viu-player-lang-title vjs-viu-player-lang-li ".concat(y(h(i.prototype),"buildCSSClass",this).call(this)),dir:"ltr"});return 0!==t.length&&n||o.classList.add("lang-active"),o.dataset.languagesId="hidden",e.appendChild(o),e}},{key:"setDefaultSelected",value:function(){var e=this.options.languages.findIndex(function(e){return 1===parseInt(e.isDefault,10)});this.setState({isSelected:e})}},{key:"upperSelectAction",value:function(){this.selectedUpperStep()}},{key:"downerSelectAction",value:function(){this.selectedDownerStep()}},{key:"loadNewLangListOptions",value:function(e){if(0!==e.length){Z.emptyEl(this.el());for(var t=e,i=0;i<t.length;i++){var n=1===parseInt(t[i].isDefault,10),a=Z.createEl("li",{textContent:t[i].name||"",className:"vjs-viu-player-lang-title vjs-viu-player-lang-li ".concat(n?"lang-active":"","}"),dir:"ltr"});a.dataset.languagesId=t[i].id,this.el().appendChild(a)}}}},{key:"selectedUpperStep",value:function(){var e=this.state.isSelected,t=e-1<0?0:e-1;this.setState({isSelected:t}),this.setComponentSelected(t)}},{key:"selectedDownerStep",value:function(){var e=this.state.isSelected,t=parseInt(this.options.languages.length,10),i=e+1>t?t:e+1;r.log("selectedDownerStep",e),this.setState({isSelected:i}),this.setComponentSelected(i)}},{key:"setComponentSelected",value:function(e){var t=Z.$$(".vjs-viu-player-lang-li");if(t)for(var i=0;i<t.length;i++)Z.removeClass(t[i],"lang-active");Z.addClass(t[e],"lang-active"),this.adjustScrollTop(e)}},{key:"handleClick",value:function(e){this.player_.trigger("subtitleChange",e),this.player_.getChild("ViuPlayerComponent").viuSubtitle.handleClick()}},{key:"confirm",value:function(){var e=this.options_.languages.concat({id:"hidden",name:"hidden",isDefault:"0",mark:"hidden"})[this.state.isSelected];void 0!==e?this.player_.trigger("subtitleChange",e.id):this.player_.trigger("subtitleChange","hidden"),this.player_.getChild("ViuPlayerComponent").viuSubtitle.handleClick()}},{key:"handleKeyDown",value:function(e){this.player_.trigger("subtitleChange",e),this.player_.getChild("ViuPlayerComponent").viuSubtitle.handleClick()}},{key:"adjustScrollTop",value:function(e){var t=this.el().clientHeight,i=parseInt(92*(e+1),10);this.el().scrollTop=i+92>t?i:0}}]),i}(),X=r.getComponent("component"),ee={chipName:""},te=function(e){p(i,X);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions(ee,n),a}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-lang-itembox",dir:"ltr"})}}]),i}(),ie=r.getComponent("component"),ne={title:"setting_language",languages:[{id:"0",name:"简体中文",isDefault:0},{id:"3",name:"ENGLISH",isDefault:1},{id:"4",name:"日文",isDefault:0}],toggleText:["隐藏","显示"]},ae=function(e){p(i,ie);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).addChild("langTitle",n),a.addChild("langList",n),a}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-subtitle-drawer-container",dir:"ltr"})}}]),i}(),se=function(e){p(i,ie);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions(ne,n),a.addChild("viuSubtitlePanelContainer",a.options),a}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-drawer vjs-viu-player-subtitle-drawer",dir:"ltr"})}},{key:"handleClick",value:function(){this.player_.removeClass("vjs-info-drawer-open"),this.player_.trigger("subtitleClick",this.options.languages),this.hasClass("active")?(this.player_.removeClass("vjs-language-drawer-open"),this.removeClass("active")):(this.player_.addClass("vjs-language-drawer-open"),this.addClass("active"))}}]),i}();r.registerComponent("langTitle",J),r.registerComponent("langList",Q),r.registerComponent("toggleHandle",te),r.registerComponent("viuSubtitlePanel",se),r.registerComponent("viuSubtitlePanelContainer",ae);var le=r.getComponent("component"),oe={chipName:"",chipCaptions:"",offlineTime:"",offlineTimeFormat:""},re=function(e){p(i,le);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions(oe,n),a}return d(i,[{key:"createEl",value:function(){var e=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-process-info",dir:"ltr"}),t=y(h(i.prototype),"createEl",this).call(this,"div",{textContent:this.options_.chipName||"",className:"vjs-viu-process-info-title",dir:"ltr"}),n=y(h(i.prototype),"createEl",this).call(this,"div",{textContent:this.options_.chipName||"",className:"vjs-viu-process-info-movieTitle",dir:"ltr"}),a=y(h(i.prototype),"createEl",this).call(this,"img",{src:this.options_.pUrl,className:"vjs-viu-process-info-userLevel",dir:"ltr"}),s=y(h(i.prototype),"createEl",this).call(this,"div",{textContent:"".concat(this.localize("episode_num")," ").concat(this.options_.chipCaptions||""),className:"vjs-viu-process-info-desc",dir:"ltr"}),l=this.options_.offlineTime?z(Number(1e3*this.options_.offlineTime)).format(this.options_.offlineTimeFormat):"",o=y(h(i.prototype),"createEl",this).call(this,"div",{textContent:"".concat(this.localize("off_shelf_date"),": ").concat(l),className:"vjs-viu-process-info-offlinetime",dir:"ltr"});return 1===this.options_.isMovie?3===this.options_.userLevel&&this.options_.showPremium?(e.appendChild(a),e.appendChild(n),this.options_.offlineTime&&e.appendChild(o)):(e.appendChild(t),this.options_.offlineTime&&e.appendChild(o)):0===this.options_.isMovie&&(3===this.options_.userLevel&&this.options_.showPremium?(e.appendChild(t),e.appendChild(a),e.appendChild(s),this.options_.offlineTime&&e.appendChild(o)):(e.appendChild(t),e.appendChild(s),this.options_.offlineTime&&e.appendChild(o))),e}}]),i}();r.registerComponent("viuProcessInfo",re);var ce=r.getComponent("component"),ue=function(e){p(i,ce);var t=C(i);function i(e,n){return c(this,i),t.call(this,e,n)}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-controlbar-bg",dir:"ltr"})}}]),i}();r.registerComponent("viuControlBarBackground",ue);var de=r.getComponent("Component"),pe=function(e){p(i,de);var t=C(i);function i(e,n){var a;c(this,i),a=t.call(this,e,n);var s=n.videoBufferTimeout?n.videoBufferTimeout:8;return e.on("waiting",function(){a.state.loadingTimer||a.loadingTimerStart(s)}),e.on("playing",function(){a.addClass("hidden"),a.clearTimer()}),e.on("canplay",function(){a.addClass("hidden"),a.clearTimer()}),e.on("error",function(){a.clearTimer()}),a.state={loadingTimer:null,loadingCount:0,triggerCount:0,cdnTimer:null},a}return d(i,[{key:"loadingTimerStart",value:function(e){var t=this;this.state.loadingTimer=setInterval(function(){t.state.loadingCount++,t.state.loadingCount===e?t.player_.trigger("weakNetwork"):t.state.loadingCount>=60&&(t.clearTimer(),t.player_.trigger("loadTimeout"))},1e3)}},{key:"clearTimer",value:function(){clearInterval(this.state.loadingTimer),this.state.loadingCount=0,this.state.loadingTimer=null,clearTimeout(this.state.cdnTimer),this.state.cdnTimer=null}}]),i}();r.registerComponent("LoadingTips",pe);var he=r.getComponent("Button"),ve=function(e){p(i,he);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).controlText("Text"),a.on("mouseenter",function(){var e=a.player_.ViuPlayer(),t=e.state.actionArea.findIndex(function(e){return e&&"ViuFontSize"===e.name_});e.setState({isActionSelected:t}),e.setComponentSelected(t)}),a}return d(i,[{key:"buildCSSClass",value:function(){return"vjs-font-size-button vjs-control ".concat(y(h(i.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this.player_.getChild("viuFontSizePanel").handleClick()}}]),i}();r.registerComponent("viuFontSize",ve);var fe=r.getComponent("Component"),Ce=r.dom,ye={title:""},me=function(e){p(i,fe);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions(ye,n),a.on("click",function(e){e.stopPropagation();var t=e.target.dataset.id;a.handleClick(t)}),a.on("mouseover",function(e){var t=e.target.attributes["data-id"].value,i=a.options_.fontSize.findIndex(function(e){return e&&e===t});a.setState({isSelected:i}),a.setComponentSelected(i)}),a.state={isSelected:0},a.setDefaultSelected(),a}return d(i,[{key:"createEl",value:function(){var e=this,t=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-list-items",dir:"ltr"}),n=this.options_.fontSize||[],a=y(h(i.prototype),"createEl",this).call(this,"ui",{className:"vjs-viu-player-list",dir:"ltr"});return n.map(function(t){var n=Ce.createEl("li",{textContent:e.localize("fontsize_".concat(t)),className:"vjs-viu-player-list-item vjs-viu-player-fontsize-item ".concat(e.options_.defaultFontSize===t?"fs-active":""," ").concat(y(h(i.prototype),"buildCSSClass",e).call(e)),dir:"ltr"});n.dataset.id=t,a.appendChild(n)}),t.appendChild(a),t}},{key:"setDefaultSelected",value:function(){var e=this,t=this.options.fontSize.findIndex(function(t){return t&&t===e.options.defaultFontSize});this.setState({isSelected:t||0})}},{key:"upperSelectAction",value:function(){this.selectedUpperStep()}},{key:"downerSelectAction",value:function(){this.selectedDownerStep()}},{key:"selectedUpperStep",value:function(){var e=this.state.isSelected,t=e-1<0?0:e-1;r.log("selectedUpperStep",t),this.setState({isSelected:t}),this.setComponentSelected(t)}},{key:"selectedDownerStep",value:function(){var e=this.state.isSelected,t=parseInt(this.options.fontSize.length,10),i=e+1>=t?t-1:e+1;this.setState({isSelected:i}),this.setComponentSelected(i)}},{key:"setComponentSelected",value:function(e){var t=Ce.$$(".vjs-viu-player-fontsize-item");if(t){for(var i=0;i<t.length;i++)Ce.hasClass(t[i],"active")&&Ce.removeClass(t[i],"active");t[e]&&Ce.addClass(t[e],"active")}}},{key:"handleClick",value:function(e){this.clearAllClass(),this.player_&&!this.player_.hasClass("v-fontsize-".concat(e))&&this.player_.addClass("v-fontsize-".concat(e));var t=this.options_.fontSize.findIndex(function(t){return t&&t===e});this.setState({isSelected:t}),this.setComponentSelected(t),this.player_.getChild("ViuPlayerComponent").viuFontSize.handleClick()}},{key:"confirm",value:function(){var e=this.state.isSelected;if(this.options_.fontSize[e]){var t=this.options_.fontSize[e];this.handleClick(t)}}},{key:"handleKeyDown",value:function(e){}},{key:"clearAllClass",value:function(){var e=this;(this.options.fontSize||[]).forEach(function(t){e.player_.hasClass("v-fontsize-".concat(t))&&e.player_.removeClass("v-fontsize-".concat(t))})}}]),i}(),ge=r.getComponent("component"),Se=r.dom,be={title:""},ke=function(e){p(i,ge);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions(be,n),a}return d(i,[{key:"createEl",value:function(){var e=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-list-title vjs-viu-player-size-title-span",dir:"ltr"}),t=Se.createEl("span",{textContent:"字幕大小",dir:"ltr"});return e.appendChild(t),e}}]),i}(),Ae=r.getComponent("component"),_e=function(e){p(i,Ae);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).addChild("viuFontSizeTitle",n),a.addChild("viuFontSizeList",n),a}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-drawer-container vjs-viu-player-fontsize-drawer-container",dir:"ltr"})}}]),i}(),je=function(e){p(i,Ae);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).addChild("viuFontSizePanelContainer",n),a}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-drawer vjs-viu-player-fontsize-drawer",dir:"ltr"})}},{key:"upperStep",value:function(){this.containerUpperStep()}},{key:"downStep",value:function(){this.containerDownStep()}},{key:"containerDownStep",value:function(){var e=this.eventBusEl_.childNodes[0];e.clientHeight<=e.scrollHeight&&(e.scrollTop=e.scrollTop+300)}},{key:"containerUpperStep",value:function(){var e=this.eventBusEl_.childNodes[0];e.clientHeight<=e.scrollHeight&&(e.scrollTop=e.scrollTop-300)}},{key:"handleClick",value:function(){this.hasClass("active")?(this.removeClass("active"),this.player_.ViuPlayer().setAllPanelClose(),this.player_.removeClass("vjs-fontsize-drawer-open")):(this.addClass("active"),this.player_.ViuPlayer().setUniquePanelOpen("isFontSizeAreaSelected"),this.player_.addClass("vjs-fontsize-drawer-open"))}}]),i}();r.registerComponent("viuFontSizePanel",je),r.registerComponent("viuFontSizePanelContainer",_e),r.registerComponent("viuFontSizeTitle",ke),r.registerComponent("viuFontSizeList",me);var Pe=r.getComponent("Button"),Te=function(e){p(i,Pe);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).controlText("Text"),a.on("mouseenter",function(){var e=a.player_.ViuPlayer(),t=e.state.actionArea.findIndex(function(e){return e&&"ViuAdvance"===e.name_});e.setState({isActionSelected:t}),e.setComponentSelected(t)}),a}return d(i,[{key:"buildCSSClass",value:function(){return"vjs-viu-advance-button vjs-control ".concat(y(h(i.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(){this.player_.getChild("viuAdvancePanel").handleClick(),this.hasClass("vjs-advance-active")?(this.removeClass("vjs-advance-active"),this.player_.ViuPlayer().setAllPanelClose()):(this.addClass("vjs-advance-active"),this.player_.ViuPlayer().setUniquePanelOpen("isAdvanceAreaSelected"))}}]),i}();r.registerComponent("viuAdvance",Te);var we=r.getComponent("Component"),De=r.dom,$e={title:""},Ne=function(e){p(i,we);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).options=r.mergeOptions($e,n),a.on("click",function(e){e.stopPropagation();var t=e.target.dataset.id;t&&a.handleClick(t)}),a.on("mouseover",function(e){if(e.target.attributes&&e.target.attributes["data-id"]){var t=e.target.attributes["data-id"].value,i=a.totalList.findIndex(function(e){return e&&e===t});a.setState({isSelected:i}),a.setComponentSelected(i)}}),a.resolutionListTotal=parseInt(a.options.advance.resolutionList.length,10)||0,a.cdnListTotal=parseInt(a.options.advance.cdnList.length,10)||0,a.resolutionList=a.options.advance.resolutionList,a.cdnList=a.options.advance.cdnList,a.totalList=a.options.advance.isCDNOpen?a.resolutionList.concat(a.cdnList):a.resolutionList,a.state={isSelected:0,isSelectLevel:0},a.player_.ready(function(){a.setDefaultSelected()}),a}return d(i,[{key:"createEl",value:function(){var e=this,t=y(h(i.prototype),"createEl",this).call(this,"div",{textContent:this.localize("resolution_hero_title"),className:"vjs-viu-player-list-title",dir:"ltr"}),n=y(h(i.prototype),"createEl",this).call(this,"div",{textContent:this.localize("resolution_title"),className:"vjs-viu-player-list-sub-title res-sub-title",dir:"ltr"}),a=y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-list-container",dir:"ltr"}),s=this.options_.advance.resolutionList||[],l=y(h(i.prototype),"createEl",this).call(this,"ui",{className:"vjs-viu-player-list",dir:"ltr"});s.map(function(t){var n=De.createEl("li",{textContent:e.localize("res_".concat(t)),className:"vjs-viu-player-list-item vjs-viu-res-item ".concat(e.options_.advance.defaultResolution===t?"selected-active":""," ").concat(y(h(i.prototype),"buildCSSClass",e).call(e)),dir:"ltr"});n.dataset.id=t,l.appendChild(n)});var o=y(h(i.prototype),"createEl",this).call(this,"div",{textContent:this.localize("cdn_title"),className:"vjs-viu-player-list-sub-title cdn_sub_title",dir:"ltr"}),r=y(h(i.prototype),"createEl",this).call(this,"ui",{className:"vjs-viu-player-list",dir:"ltr"});return(this.options_.advance.cdnList||[]).map(function(t){var n=De.createEl("li",{textContent:e.localize("res_".concat(t)),className:"vjs-viu-player-list-item  vjs-viu-res-item vjs-viu-cdn-item ".concat(e.options_.advance.defaultCdn===t?"selected-active":""," ").concat(y(h(i.prototype),"buildCSSClass",e).call(e)),dir:"ltr"});n.dataset.id=t,r.appendChild(n)}),a.appendChild(t),a.appendChild(n),a.appendChild(l),this.options_.advance.isCDNOpen&&(a.appendChild(o),a.appendChild(r)),a}},{key:"setDefaultSelected",value:function(){this.setState({isSelected:0});var e=De.$$(".vjs-viu-res-item");e[0]&&De.addClass(e[0],"active")}},{key:"upperSelectAction",value:function(){this.selectedUpperStep()}},{key:"downerSelectAction",value:function(){this.selectedDownerStep()}},{key:"selectedUpperStep",value:function(){var e=this.state.isSelected,t=e-1<0?0:e-1;t<this.resolutionListTotal&&this.setState({isSelectLevel:0}),this.setState({isSelected:t}),this.setComponentSelected(t)}},{key:"selectedDownerStep",value:function(){var e=this.state.isSelected,t=this.totalList.length,i=e+1>=t?t-1:e+1;i>this.resolutionListTotal-1&&this.setState({isSelectLevel:1}),this.setState({isSelected:i}),this.setComponentSelected(i)}},{key:"setComponentSelected",value:function(e){var t=De.$$(".vjs-viu-res-item");if(t){for(var i=0;i<t.length;i++)De.hasClass(t[i],"active")&&De.removeClass(t[i],"active");t[e]&&De.addClass(t[e],"active")}}},{key:"setComponentResSelected",value:function(e){var t=De.$$(".vjs-viu-res-item");if(t){for(var i=0;i<t.length;i++)De.hasClass(t[i],"selected-active")&&De.removeClass(t[i],"selected-active");t[e]&&De.addClass(t[e],"selected-active")}}},{key:"setResolutionListActive",value:function(e){var t=De.$$(".vjs-viu-res-item");Array.from(t).filter(function(e){return!De.hasClass(e,"vjs-viu-cdn-item")}).forEach(function(t){De.hasClass(t,"selected-active")&&De.removeClass(t,"selected-active"),t.dataset.id===e&&De.addClass(t,"selected-active")})}},{key:"setCdnListActive",value:function(e){var t=De.$$(".vjs-viu-res-item");Array.from(t).filter(function(e){return De.hasClass(e,"vjs-viu-cdn-item")}).forEach(function(t){De.hasClass(t,"selected-active")&&De.removeClass(t,"selected-active"),t.dataset.id===e&&De.addClass(t,"selected-active")})}},{key:"handleClick",value:function(e){this.clearAllClass(),this.player_&&!this.player_.hasClass("v-res-".concat(e))&&this.player_.addClass("v-res-".concat(e)),this.resolutionList.includes(e)&&this.setResolutionListActive(e),this.cdnList.includes(e)&&this.setCdnListActive(e),this.player_.getChild("ViuPlayerComponent").viuAdvance.handleClick(),this.player_.trigger("viuAdvance",{id:e,isSelectLevel:this.state.isSelectLevel||0})}},{key:"confirm",value:function(){var e=this.state.isSelected;switch(this.state.isSelectLevel){case 0:if(this.options_.advance.resolutionList[e]){var t=this.options_.advance.resolutionList[e];t&&this.handleClick(t)}break;case 1:if(this.options_.advance.cdnList[e-this.resolutionListTotal]){var i=this.options_.advance.cdnList[e-this.resolutionListTotal];i&&this.handleClick(i)}}}},{key:"clearAllClass",value:function(){var e=this;(this.totalList||[]).forEach(function(t){e.player_.hasClass("v-res-".concat(t))&&e.player_.removeClass("v-res-".concat(t))})}}]),i}(),xe=r.getComponent("component"),Le=function(e){p(i,xe);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).addChild("viuResolutionList",n),a}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-drawer-container vjs-viu-player-advance-drawer-container",dir:"ltr"})}}]),i}(),Ee=function(e){p(i,xe);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e,n)).addChild("viuAdvancePanelContainer",n),a}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-drawer vjs-viu-player-advance-drawer ",dir:"ltr"})}},{key:"upperStep",value:function(){this.containerUpperStep()}},{key:"downStep",value:function(){this.containerDownStep()}},{key:"containerDownStep",value:function(){var e=this.eventBusEl_.childNodes[0];e.clientHeight<=e.scrollHeight&&(e.scrollTop=e.scrollTop+300)}},{key:"containerUpperStep",value:function(){var e=this.eventBusEl_.childNodes[0];e.clientHeight<=e.scrollHeight&&(e.scrollTop=e.scrollTop-300)}},{key:"handleClick",value:function(){this.hasClass("active")?(this.removeClass("active"),this.player_.removeClass("vjs-advance-drawer-open")):(this.addClass("active"),this.player_.addClass("vjs-advance-drawer-open"))}}]),i}();r.registerComponent("viuAdvancePanel",Ee),r.registerComponent("viuAdvancePanelContainer",Le),r.registerComponent("viuResolutionList",Ne);var Oe=r.getPlugin("plugin"),Ve=r.getComponent("component"),ze={isTopSubtitleDisable:!1,fontSize:["s","m","l"],defaultFontSize:"s",info:{chipName:"",episode:"",chipCaptions:"",chipDesc:"",chipTotal:0,isMovie:0,chipActiveTotal:0,userLevel:"",pUrl:"",showPremium:!0,offlineTime:"",offlineTimeFormat:"YYYY-MM-DD HH:mm:ss"},advance:{resolutionList:["s1080p","s720p","s480p","s240p"],defaultResolution:"s720p",cdnList:["url","url2"],defaultCdn:"",isCDNOpen:!0,isThrottle:!1}},Ie=function(e){p(i,Oe);var t=C(i);function i(e,n){var a;return c(this,i),(a=t.call(this,e)).options=r.mergeOptions(ze,n),a.player.addChild("ViuPlayerComponent",a.options),a.player.addChild("viuInfoPanel",a.options),a.player.addChild("viuSubtitlePanel",a.options),a.player.addChild("viuFontSizePanel",a.options),a.player.addChild("viuAdvancePanel",a.options),a.player.addChild("viuControlBarBackground",a.options),a.player.addChild("LoadingTips",a.options),a.state={isTopSubtitle:!0,isActionSelected:0,actionArea:[],isTopSubtitleDisable:!1,topSubtitleIndex:null,panel:{isSubtileAreaSelected:!1,isInfoAreaSelected:!1,isFontSizeAreaSelected:!1,isAdvanceAreaSelected:!1}},a.player.ready(function(){a.player.addClass("vjs-viu-player"),a.player.getChild("ViuPlayerComponent")&&a.player.getChild("ViuPlayerComponent").addChild("viuProcessInfo",a.options.info);for(var e=[a.player.getChild("ViuPlayerComponent").controlBar,a.player.getChild("ViuPlayerComponent").playToggle,a.player.getChild("ViuPlayerComponent").viuNextChip,a.player.getChild("ViuPlayerComponent").viuInfo,a.player.getChild("ViuPlayerComponent").viuSubtitle,a.player.getChild("ViuPlayerComponent").viuAdvance,a.player.getChild("ViuPlayerComponent").viuTopSubtitle,a.player.getChild("ViuPlayerComponent").viuFontSize],t=0;t<e.length;t++)e[t]&&e[t].on("click",function(e){Object.prototype.hasOwnProperty.call(this,"blur")&&this.blur()});a.originActionArea=e.slice(),a.defaultActionArea=e;var i=a.options.info,n=i.chipTotal,s=i.episode,l=i.isMovie,o=i.chipActiveTotal;if(n===s||1===l||Number(s)===o){a.player.getChild("ViuPlayerComponent").viuNextChip.addClass("hidden");var r=a.defaultActionArea.findIndex(function(e){return e&&"ViuNextChip"===e.name_});a.defaultActionArea.splice(r,1)}a.on("statechanged",function(e,t){if(e.changes&&e.changes.isTopSubtitleDisable){var i=a.state.actionArea,n=a.player.getChild("ViuPlayerComponent").viuTopSubtitle,s=a.state.actionArea.findIndex(function(e){return e&&"ViuTopSubtitle"===e.name_});s>-1&&a.setState({topSubtitleIndex:s}),e.changes.isTopSubtitleDisable.to?i.splice(s,1):i.splice(a.state.topSubtitleIndex,0,n),0!==a.state.isActionSelected?(a.setState({isActionSelected:a.state.topSubtitleIndex,actionArea:i}),a.clearDefaultComponentSelected(),a.setComponentSelected(a.state.topSubtitleIndex)):(a.setState({isActionSelected:0,actionArea:i}),a.clearDefaultComponentSelected(),a.setComponentSelected(0))}}),a.setState({actionArea:a.defaultActionArea}),a.state.actionArea[a.state.isActionSelected]&&a.state.actionArea[a.state.isActionSelected].addClass("status-active"),a.state.actionArea[1]&&a.state.actionArea[1].on("mouseenter",function(){a.setState({isActionSelected:1}),a.setComponentSelected(1)}),a.state.actionArea[0]&&a.state.actionArea[0].on("mouseenter",function(){a.setState({isActionSelected:0}),a.setComponentSelected(0)}),a.checkTopSubtitleDisable(a.options.isTopSubtitleDisable)}),a}return d(i,[{key:"checkTopSubtitleDisable",value:function(e){this.setState({isTopSubtitleDisable:e}),this.player.getChild("ViuPlayerComponent").viuTopSubtitle.trigger("toggleDisable",{disable:e})}},{key:"upperSelectAction",value:function(){if(this.checkAllPanelClose()){this.setState({isActionSelected:0}),this.setComponentSelected(0)}else{var e=this.player.getChild("viuSubtitlePanel").getChild("viuSubtitlePanelContainer").getChild("langList"),t=this.player.getChild("viuFontSizePanel").getChild("viuFontSizePanelContainer").getChild("viuFontSizeList"),i=this.player.getChild("viuAdvancePanel").getChild("viuAdvancePanelContainer").getChild("viuResolutionList"),n=this.player.getChild("ViuInfoPanel");this.state.panel.isSubtileAreaSelected&&e.upperSelectAction(),this.state.panel.isInfoAreaSelected&&n.containerUpperStep(),this.state.panel.isFontSizeAreaSelected&&t.upperSelectAction(),this.state.panel.isAdvanceAreaSelected&&i.upperSelectAction()}}},{key:"leftSelectAction",value:function(){if(this.checkAllPanelClose()){var e=this.state.isActionSelected,t=e-1<1?1:e-1;this.setState({isActionSelected:t}),this.setComponentSelected(t)}else{var i=this.player.getChild("viuSubtitlePanel").getChild("viuSubtitlePanelContainer").getChild("langList");this.checkAllPanelClose()&&i.upperSelectAction()}}},{key:"rightSelectAction",value:function(){if(this.checkAllPanelClose()){var e=this.state.isActionSelected,t=e+1>this.state.actionArea.length-1?this.state.actionArea.length-1:e+1;this.setState({isActionSelected:t}),this.setComponentSelected(t)}else{var i=this.player.getChild("viuSubtitlePanel").getChild("viuSubtitlePanelContainer").getChild("langList");this.state.panel.isSubtileAreaSelected&&i.upperSelectAction()}}},{key:"downerSelectAction",value:function(){if(this.checkAllPanelClose()){var e=this.state.isActionSelected,t=0===e?1:e;this.setState({isActionSelected:t}),this.setComponentSelected(t)}else{var i=this.player.getChild("viuSubtitlePanel").getChild("viuSubtitlePanelContainer").getChild("langList"),n=this.player.getChild("viuFontSizePanel").getChild("viuFontSizePanelContainer").getChild("viuFontSizeList"),a=this.player.getChild("viuAdvancePanel").getChild("viuAdvancePanelContainer").getChild("viuResolutionList"),s=this.player.getChild("ViuInfoPanel");this.state.panel.isSubtileAreaSelected&&i.downerSelectAction(),this.state.panel.isInfoAreaSelected&&s.containerDownStep(),this.state.panel.isFontSizeAreaSelected&&n.downerSelectAction(),this.state.panel.isAdvanceAreaSelected&&a.downerSelectAction()}}},{key:"setComponentSelected",value:function(e){var t=this;Object.keys(this.state.actionArea).map(function(i){parseInt(i,10)!==e&&t.state.actionArea[i].removeClass("status-active")}),this.state.actionArea[e].addClass("status-active")}},{key:"clearDefaultComponentSelected",value:function(){for(var e=0;e<this.originActionArea.length;e++)this.originActionArea[e].removeClass("status-active")}},{key:"setLangListComponentSelected",value:function(e){var t=this;Object.keys(this.state.actionArea).map(function(i){parseInt(i,10)!==e&&t.state.actionArea[i].removeClass("status-active")}),this.state.actionArea[e].addClass("status-active")}},{key:"checkVideoProcessed",value:function(){return 0===this.state.isActionSelected&&this.checkAllPanelClose()}},{key:"toggleInfo",value:function(){var e=this.state.actionArea.findIndex(function(e){return e.name_&&"ViuInfo"===e.name_});this.setState({isActionSelected:e}),this.setComponentSelected(e),this.player.getChild("ViuPlayerComponent").viuInfo.trigger("click")}},{key:"toggleSubtitle",value:function(e){var t=this.state.actionArea.findIndex(function(e){return e.name_&&"ViuSubtitle"===e.name_});this.setState({isActionSelected:t}),this.setComponentSelected(t),this.player.getChild("ViuPlayerComponent").viuSubtitle.trigger("click")}},{key:"toggleFontSize",value:function(){var e=this.state.actionArea.findIndex(function(e){return e.name_&&"ViuFontSize"===e.name_});this.setState({isActionSelected:e}),this.setComponentSelected(e),this.player.getChild("ViuPlayerComponent").viuFontSize.trigger("click")}},{key:"showTopSubtitle",value:function(){this.player.getChild("ViuPlayerComponent")&&this.player.getChild("ViuPlayerComponent").viuTopSubtitle.trigger("toggleShow",{open:!0})}},{key:"hideTopSubtitle",value:function(){this.player.getChild("ViuPlayerComponent")&&this.player.getChild("ViuPlayerComponent").viuTopSubtitle.trigger("toggleShow",{open:!1})}},{key:"loadNewLangListOptions",value:function(e){this.player.getChild("viuSubtitlePanel").getChild("viuSubtitlePanelContainer").getChild("langList").loadNewLangListOptions(e)}},{key:"toggleTopSubtitle",value:function(){return this.player.getChild("ViuPlayerComponent").viuTopSubtitle.handleClick()}},{key:"toggleNextChip",value:function(){this.player.getChild("ViuPlayerComponent")&&this.player.getChild("ViuPlayerComponent").viuNextChip.trigger("click")}},{key:"return",value:function(e){this.checkAllPanelClose()?e&&e():(this.returnKeyReset(),r.log("返回调试--state--",this.state))}},{key:"confirm",value:function(){if(this.checkAllPanelClose()){var e=this.player.getChild("ViuPlayerComponent").getChild("playToggle");switch(this.state.actionArea[this.state.isActionSelected].name_){case"ControlBar":case"PlayToggle":e.handleClick();break;case"ViuNextChip":this.player.getChild("ViuPlayerComponent").getChild("viuNextChip").handleClick();break;case"ViuInfo":this.toggleInfo();break;case"ViuSubtitle":this.toggleSubtitle();break;case"ViuTopSubtitle":this.toggleTopSubtitle();break;case"ViuFontSize":this.player.getChild("ViuPlayerComponent").getChild("viuFontSize").handleClick();break;case"ViuAdvance":this.player.getChild("ViuPlayerComponent").getChild("viuAdvance").handleClick()}}else{var t=this.player.getChild("viuSubtitlePanel").getChild("viuSubtitlePanelContainer").getChild("langList"),i=this.player.getChild("viuFontSizePanel").getChild("viuFontSizePanelContainer").getChild("viuFontSizeList"),n=this.player.getChild("viuAdvancePanel").getChild("viuAdvancePanelContainer").getChild("viuResolutionList");this.state.panel.isSubtileAreaSelected&&t.confirm(),this.state.panel.isFontSizeAreaSelected&&i.confirm(),this.state.panel.isAdvanceAreaSelected&&n.confirm()}}},{key:"setUniquePanelOpen",value:function(e){var t,i,n,a=this.state.panel;if(Object.hasOwnProperty.call(a,e)){var s=Object.assign({},a,(n=!0,(i=e)in(t={})?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t),this.getOtherDefaultPanel(e));this.setState({panel:s})}}},{key:"setAllPanelClose",value:function(){this.setState({panel:this.getAllDefaultPanel()})}},{key:"checkAllPanelClose",value:function(){var e=!0,t=this.state.panel;for(var i in t)if(t[i]){e=!1;break}return e}},{key:"getOtherDefaultPanel",value:function(e){var t=this.state.panel;for(var i in delete t[e],t)t[i]=!1;return t}},{key:"getAllDefaultPanel",value:function(e){var t=this.state.panel;for(var i in t)t[i]=!1;return t}},{key:"returnKeyReset",value:function(){for(var e in this.state.panel)if(this.state.panel[e])switch(e){case"isSubtileAreaSelected":this.player.getChild("ViuPlayerComponent").viuSubtitle.handleClick();break;case"isInfoAreaSelected":this.player.getChild("ViuPlayerComponent").viuInfo.handleClick();break;case"isFontSizeAreaSelected":this.player.getChild("ViuPlayerComponent").viuFontSize.handleClick();break;case"isAdvanceAreaSelected":this.player.getChild("ViuPlayerComponent").viuAdvance.handleClick()}}}]),i}();Ie.defaultState={},Ie.VERSION="0.4.2";var Me=function(e){p(i,Ve);var t=C(i);function i(e,n){return c(this,i),t.call(this,e,n)}return d(i,[{key:"createEl",value:function(){return y(h(i.prototype),"createEl",this).call(this,"div",{className:"vjs-viu-player-panel",dir:"ltr"})}}]),i}();return Me.prototype.options_={children:["playToggle","viuNextChip","viuInfo","viuSubtitle","viuAdvance","viuTopSubtitle","viuFontSize"]},r.registerComponent("ViuPlayerComponent",Me),(r.registerPlugin||r.plugin)("ViuPlayer",Ie),Ie});
